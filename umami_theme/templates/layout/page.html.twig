{#
/**
 * @file
 * Theme override to display a single page.
 *
 * This is based on Mercury's `page.html.twig`, but matches the overall
 * structure of the core Umami theme to improve visual parity:
 * - Header contains only the global header blocks.
 * - Banner blocks render in a full-width band above breadcrumbs.
 * - Breadcrumbs + page title render in `main` (not in the header).
 * - Content is wrapped in `.main-content-area.container` like Umami.
 *
 * This theme also adds two regions to better match classic Umami:
 * - `content_bottom` (Recipe collections band)
 * - `bottom` (Disclaimer band)
 *
 * Keeping these as real regions lets us avoid "full width inside footer"
 * layout hacks and keeps block placement/config closer to upstream Umami.
 *
 * @see \Drupal\umami_theme\Hook\ThemeHooks::preprocessPage()
 * @see \Drupal\Core\Theme\ThemePreprocess::preprocessPage()
 */
#}
<div class="layout-container">
  {% set current_langcode = language_id|default('en') %}
  {% set is_es = current_langcode == 'es' %}
  {% set is_recipes_landing = canvas_page_id|default('') == '1' %}

  {% if page.pre_header|render|trim is not empty or
     page.header|render|trim is not empty %}
    <header class="layout-header" role="banner">
      <div class="container">
        {% if page.pre_header|render|trim is not empty %}
          {{ page.pre_header }}
        {% endif %}
        {{ page.header }}
      </div>
    </header>
  {% endif %}

  <main>
    {{ page.highlighted }}

    {# Full-width banner band (matches classic Umami `banner_top` region). #}
    {% if is_front or is_recipes_landing or page.banner_top|render|trim is not empty %}
      <div class="layout-banner-top">
        {% if is_front %}
          {{
            include(
              'umami_theme:banner',
              {
                title: is_es ? 'Pasta vegetariana horneada súper fácil' : 'Super easy vegetarian pasta bake',
                summary: is_es ? 'Una pasta al horno es la comida más reconfortante que hay. Este plato al horno es súper rápido de preparar y es ideal para cocinar entre semana para toda la familia.' : 'A wholesome pasta bake is the ultimate comfort food. This delicious bake is super quick to prepare and an ideal midweek meal for all the family.',
                link_text: is_es ? 'Ver receta' : 'View recipe',
                link_url: is_es ? '/es/node/6' : '/super-easy-vegetarian-pasta-bake',
                media: {
                  src: file_url('public://veggie-pasta-bake-hero-umami.jpg'),
                  alt: is_es ? 'Pasta vegetariana al horno' : 'Vegetarian pasta bake'
                }
              },
              with_context = false
            )
          }}
        {% elseif is_recipes_landing %}
          {{
            include(
              'umami_theme:banner',
              {
                title: is_es ? 'Brownies Veganos de Chocolate y Nuez' : 'Vegan chocolate and nut brownies',
                summary: is_es ? 'Estos exquisitos brownies quedarán sabrosos por dentro y crujientes por fuera. ¡La tentación perfecta!' : 'These sumptuous brownies should be gooey on the inside and crisp on the outside. A perfect indulgence!',
                link_text: is_es ? 'Ver receta' : 'View recipe',
                link_url: is_es ? '/es/node/2' : '/vegan-chocolate-and-nut-brownies',
                media: {
                  src: file_url('public://vegan-brownies-hero-umami.jpg'),
                  alt: is_es ? 'Brownies veganos de chocolate y nueces' : 'Vegan chocolate and nut brownies'
                }
              },
              with_context = false
            )
          }}
        {% endif %}
        {{ page.banner_top }}
      </div>
    {% endif %}

    {% if not (rendered_by_canvas|default(false)) %}
      <div class="layout-breadcrumbs">
        <div class="container">
          {{ breadcrumb }}
        </div>
      </div>

      {#
        Match Umami: node titles are rendered by the node template itself.
        The page title block is only used for non-node routes (views, search,
        etc).
      #}
      {% if not node %}
        <div class="layout-page-title">
          <div class="container">
            {{ title }}
          </div>
        </div>
      {% endif %}
    {% endif %}

    <div class="main-content-area container">
      <div class="layout-content">
        <a id="main-content" tabindex="-1"></a>{# link is in html.html.twig #}
        {{ page.content }}
      </div>{# /.layout-content #}

      {% if page.sidebar_first %}
        <aside class="layout-sidebar-first" role="complementary">
          {{ page.sidebar_first }}
        </aside>
      {% endif %}

      {% if page.sidebar_second %}
        <aside class="layout-sidebar-second" role="complementary">
          {{ page.sidebar_second }}
        </aside>
      {% endif %}
    </div>

    {% if page.content_bottom %}
      <div class="layout-content-bottom">
        {{ page.content_bottom }}
      </div>
    {% endif %}
  </main>

  <footer class="footer" role="contentinfo">
    <div class="layout-footer">
      <div class="container">
        <div id="block-mercury-footer-promo">
          {{
            include(
              'umami_theme:footer-block',
              {
                title: is_es ? 'Revista de Comida Umami' : 'Umami Food Magazine',
                summary: is_es ? 'Trucos y consejos. Artículos exclusivos de la revista, recetas y una variedad de razones para conseguir tu copia hoy.' : 'Skills and know-how. Magazine exclusive articles, recipes and plenty of reasons to get your copy today.',
                link_text: is_es ? 'Más información' : 'Find out more',
                link_url: is_es ? '/es/node/18' : '/about-umami',
                media: {
                  src: file_url('public://umami-bundle.png'),
                  alt: is_es ? 'Revista de Comida Umami' : 'Umami Food Magazine'
                }
              },
              with_context = false
            )
          }}
        </div>
        {{ page.footer }}
      </div>
    </div>

    <div class="layout-bottom">
      <div class="container">
        <div id="block-mercury-disclaimer">
          {{
            include(
              'umami_theme:disclaimer',
              {
                disclaimer: is_es ? '<strong>Revista Umami y Publicaciones Umami</strong> es una revista ficticia publicada con propósito ilustrativo sólamente.' : '<strong>Umami Magazine &amp; Umami Publications</strong> is a fictional magazine and publisher for illustrative purposes only.',
                copyright: is_es ? '&copy; 2026 Términos y Condiciones' : '&copy; 2026 Terms &amp; Conditions'
              },
              with_context = false
            )
          }}
        </div>
        {{ page.bottom }}
      </div>
    </div>
  </footer>

</div>{# /.layout-container #}
